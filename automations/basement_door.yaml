# ---------------------------------
#  Basement Door / Garage Light
# ---------------------------------
- alias: Garage Light On with basement door sensor
  trigger:
    platform: state
    entity_id: sensor.basement_door_state
    to: 'open'
  action:
    service: switch.turn_on
    entity_id: 
      - switch.garage_florecent
      - switch.garage_stairs

- alias: Garage Light Off with basement door sensor
  trigger:
    platform: state
    entity_id: sensor.basement_door_state
    to: 'closed'
    for:
      minutes: 10
  action:
    service: switch.turn_off
    entity_id: 
      - switch.garage_florecent
      - switch.garage_stairs

- alias: Basement door left open
  trigger:
    platform: state
    entity_id: sensor.basement_door_state
    to: 'open'
    for:
      seconds: 30
  condition:
    condition: state
    entity_id: input_boolean.basement_door_alarm
    state: 'on'
  action:
    - service: notify.ios_kyles_gigantic_iphone_7
      data:
        message: Basement Door Left Open
    - service: tts.google_say
      entity_id: media_player.kitchen
      data:
        message: Basement door left open, cats will escape
